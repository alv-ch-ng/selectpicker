/* alv-ch-ng.selectpicker - 0.2.3 - 2015-07-23 - Copyright (c) 2015 Informatik der Arbeitslosenversicherung; */
!function(){"use strict";var a=angular.module("alv-ch-ng.selectpicker",["ngLodash"]);a.directive("selectpicker",["$compile","$rootScope","lodash",function(a,b,c){return{priority:20,restrict:"E",require:"ngModel",replace:!0,scope:{options:"=",labelAttribute:"=",labelProvider:"=",valueAttribute:"=",i18nLabel:"=",ngModel:"="},link:function(b,d,e,f){function g(){return angular.isFunction(b.labelProvider)?b.labelProvider:b.labelAttribute?function(a){return a?a[b.labelAttribute]:""}:function(a){return a}}function h(){return b.valueAttribute?function(a){return a?a[b.valueAttribute]:a}:function(a){return a}}function i(a){if(b.options){var d=c.findIndex(b.options,function(c){return c[b.valueAttribute]===a});return 0>d?null:b.options[d]}return null}function j(){var a,c,d="";if(b.ngModel){if(b.valueAttribute){if(angular.isArray(b.ngModel)){for(a=0;a<b.ngModel.length;a++)d&&(d+=", "),c=i(b.ngModel[a]),d+=b.itemLabelProvider(c);return d}return b.itemLabelProvider(i(b.ngModel))}if(angular.isArray(b.ngModel)){for(a=0;a<b.ngModel.length;a++)d&&(d+=", "),c=b.ngModel[a],d+=b.itemLabelProvider(c);return d}return b.itemLabelProvider(b.ngModel)}return null}var k=e.id+"-list",l=e.title||"common_i18n_select_noneSelectedText",m="common_i18n_select_noSelectionText",n="required"in e||!1,o="multiple"in e||!1,p="showTick"in e||!1;b.itemLabelProvider=g(),b.itemValueProvider=h(),b.buttonLabelProvider=j,b.buttonLabel=b.buttonLabelProvider();var q=angular.element('<div class="btn-block btn-plain selectpicker dropdown form-control"><button type="button" class="dropdown-toggle" data-toggle="dropdown" id="'+k+'"><span ng-hide="hasSelections()" class="filter-option pull-left" translate="'+l+'"></span><span ng-show="hasSelections() && !i18nLabel" class="filter-option pull-left" ng-bind="buttonLabel"></span><span ng-show="hasSelections() && i18nLabel" class="filter-option pull-left" translate="{{buttonLabel}}"></span>&nbsp;<span class="caret"></span></button></div>');(o||p)&&q.addClass("show-tick");var r=angular.element('<ul class="dropdown-menu" role="menu" aria-labelledby="'+k+'"></ul>');n||r.append(angular.element('<li role="presentation"><a tabindex="-1" role="menuitem" ng-click="unSelect()"><span class="text no-selection" translate="'+m+'"></span></a></li>')),r.append(angular.element('<li role="presentation" ng-class="{\'selected\': isSelected(option)}" ng-repeat="option in options"><a ng-click="select(option)" tabindex="{{$index}}" role="menuitem"><span class="text" ng-hide="i18nLabel" ng-bind="itemLabelProvider(option)"></span><span class="text" ng-show="i18nLabel" translate="{{itemLabelProvider(option)}}"></span><span class="glyphicon glyphicon-ok check-mark"></span></a></li>')),q.append(r),a(q)(b),d.append(q),b.hasSelections=function(){return b.ngModel?angular.isArray(b.ngModel)?b.ngModel.length>0:!0:!1},b.select=function(a){var d=b.itemValueProvider(a);b.valueAttribute&&(d=a[b.valueAttribute]),o?(c.findIndex(f.$viewValue,d)>-1?c.remove(f.$viewValue,d):f.$viewValue.push(d),f.$commitViewValue()):f.$setViewValue(d)},b.isSelected=function(a){return!o&&f.$viewValue===a||o&&c.findIndex(f.$viewValue,a)>-1?!0:!1},b.unSelect=function(){f.$setViewValue(""),f.$commitViewValue()},b.$watchCollection("ngModel",function(){b.buttonLabel=b.buttonLabelProvider()}),b.$watch("ngModel",function(){b.buttonLabel=b.buttonLabelProvider()}),b.$on("i18n:languageChanged",function(){b.buttonLabel=b.buttonLabelProvider()})}}}])}();